<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha256-yIDrPSXHZdOZhAqiBP7CKzIwMQmRCJ8UeB8Jo17YC4o=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"shoothzj.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.19.1","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"style":null,"show_result":false},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"prism":false,"i18n":{"placeholder":"æœç´¢...","empty":"æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}","hits_time":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰","hits":"æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta property="og:type" content="website">
<meta property="og:title" content="å¼ ä¿­çš„åšå®¢">
<meta property="og:url" content="https://shoothzj.github.io/index.html">
<meta property="og:site_name" content="å¼ ä¿­çš„åšå®¢">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="shoothzj">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://shoothzj.github.io/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>å¼ ä¿­çš„åšå®¢</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">å¼ ä¿­çš„åšå®¢</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="æœç´¢" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="æœç´¢..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">shoothzj</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">64</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">35</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/shoothzj" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;shoothzj" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/shoothzj" title="Twitter â†’ https:&#x2F;&#x2F;twitter.com&#x2F;shoothzj" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/code/java/find-save-concurrent/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/code/java/find-save-concurrent/" class="post-title-link" itemprop="url">javaè¿›è¡Œæ•°æ®åº“æ“ä½œçš„å¹¶å‘æ§åˆ¶</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>
      

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-12-25 08:44:38 / ä¿®æ”¹æ—¶é—´ï¼š00:59:54" itemprop="dateCreated datePublished" datetime="2023-12-25T08:44:38+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>åœ¨ç°ä»£åº”ç”¨ç¼–ç ä¸­ï¼Œä»æ•°æ®åº“é‡Œé¢findå‡ºæ¥ï¼Œè¿›è¡Œä¸€äº›ä¸šåŠ¡é€»è¾‘æ“ä½œï¼Œæœ€åå†saveå›å»ã€‚å³ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> personRepo.findById(id);</span><br><span class="line">person.setAge(<span class="number">18</span>);</span><br><span class="line">personRepo.save(person);</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯è¿™æ ·çš„ä¸šåŠ¡æ“ä½œï¼Œå¦‚æœä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹å¹´é¾„ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ä¿®æ”¹æ˜µç§°ï¼Œæœ€åsaveå›å»ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¹´é¾„&#x2F;æ˜µç§°æŸä¸€ä¸ªçš„ä¿®æ”¹è¢«è¦†ç›–ã€‚</p>
<pre class="mermaid">sequenceDiagram
    participant A as Thread A
    participant B as Thread B
    participant DB as Database

    A->>DB: find person by id
    Note over A: person.setAge(18)
    B->>DB: find person by id
    Note over B: person.setNickname("NewName")

    A->>DB: save person
    B->>DB: save person

    Note over DB: Potential Overwrite Issue</pre>

<p>å¸¸è§çš„è§£å†³æ–¹æ¡ˆæœ‰ä¸¤ç§</p>
<h1><span id="zhi-xing-qian-tian-jia-bei-guan-suo">æ‰§è¡Œå‰æ·»åŠ æ‚²è§‚é”</span><a href="#zhi-xing-qian-tian-jia-bei-guan-suo" class="header-anchor">#</a></h1><p>é€šè¿‡åˆ†å¸ƒå¼é”ç­‰æ–¹å¼ï¼Œä¿è¯åŒä¸€æ—¶é—´åªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¤Ÿå¯¹æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚</p>
<h1><span id="le-guan-suo-si-lu-shi-xian">ä¹è§‚é”æ€è·¯å®ç°</span><a href="#le-guan-suo-si-lu-shi-xian" class="header-anchor">#</a></h1><p>ç‰ˆæœ¬æ§åˆ¶æ˜¯å¦ä¸€ç§æµè¡Œçš„å¤„ç†å¹¶å‘é—®é¢˜çš„æ–¹æ³•ã€‚å®ƒé€šè¿‡åœ¨æ¯æ¬¡æ›´æ–°è®°å½•æ—¶é€’å¢ç‰ˆæœ¬å·æ¥ç¡®ä¿æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p>
<p>è¿™åœ¨JPAä¸­ï¼Œå¯ä»¥é€šè¿‡åœ¨fieldä¸Šæ·»åŠ <code>@Version</code>æ³¨è§£æ¥å®ç°ï¼Œä½†è¿™ä¹Ÿå°±è¦æ±‚â‘ æ•°æ®åº“ä¸­å¿…é¡»æœ‰versionå­—æ®µï¼Œâ‘¡å¯¹äºæŸ¥æ‰¾åæ›´æ–°ç±»æ“ä½œï¼Œå¿…é¡»ä½¿ç”¨JPAçš„saveæ–¹æ³•æ¥è¿›è¡Œæ›´æ–°ã€‚</p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡<code>update_time</code>æ¥æ¨¡æ‹Ÿä¹è§‚é”å®ç°ï¼Œè¿™å¯èƒ½éœ€è¦ä½ åœ¨æ›´æ–°çš„æ—¶å€™æ·»åŠ <code>update_time</code>çš„æ¡ä»¶ï¼Œå¹¶ä¸”ï¼Œ<code>update_time</code>åœ¨æç«¯åœºæ™¯ä¸‹ï¼Œç†è®ºæ­£ç¡®æ€§æ²¡é‚£ä¹ˆä¸¥è°¨ã€‚</p>
<script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';	mermaid.initialize({startOnLoad: true, flowchart: {curve: 'linear'}}); </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/pagination-practice/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/pagination-practice/" class="post-title-link" itemprop="url">åˆ†é¡µå®è·µï¼šå‰åç«¯å¤šç§åˆ†é¡µæ–¹å¼å®ç°å¯¹æ¯”</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-12-16 12:27:25" itemprop="dateCreated datePublished" datetime="2023-12-16T12:27:25+00:00">2023-12-16</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-12-25 00:59:54" itemprop="dateModified" datetime="2023-12-25T00:59:54+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œåˆ†é¡µæ²¡æœ‰ç»Ÿä¸€çš„è§„èŒƒï¼Œå®ç°æ–¹å¼ä¹Ÿå„ä¸ç›¸åŒï¼Œæœ‰çš„ä¼šè¿”å›æ€»é¡µæ•°ï¼Œæœ‰çš„ä¼šè¿”å›æ€»æ¡æ•°ï¼Œæœ‰çš„å¯ä»¥ä»»æ„ç¿»é¡µã€‚æœ¬æ–‡å¯¹æ¯”ä¸€ä¸‹å‡ ç§å¸¸è§çš„åˆ†é¡µæ–¹å¼ã€‚</p>
<p>æ€»ä½“æ¥è¯´ï¼Œåˆ†é¡µçš„å®ç°æ–¹æ¡ˆåˆ†ä¸ºå››ç§ï¼š</p>
<ul>
<li>åç«¯å…¨éƒ¨è¿”å›ï¼Œç”±å‰ç«¯åˆ†é¡µ</li>
<li>limit offsetæ–¹æ¡ˆ</li>
<li>cursoræ–¹æ¡ˆ</li>
<li>cursoræ–¹æ¡ˆä¸offsetç»“åˆ</li>
</ul>
<h1><span id="hou-duan-quan-bu-fan-hui-you-qian-duan-fen-ye">åç«¯å…¨éƒ¨è¿”å›ï¼Œç”±å‰ç«¯åˆ†é¡µ</span><a href="#hou-duan-quan-bu-fan-hui-you-qian-duan-fen-ye" class="header-anchor">#</a></h1><pre class="mermaid">sequenceDiagram
    participant å‰ç«¯
    participant åç«¯
    å‰ç«¯ ->> åç«¯: è¯·æ±‚èµ„æºé›†æ•°æ®
    åç«¯ -->> å‰ç«¯: è¿”å›å…¨éƒ¨æ•°æ®</pre>

<table>
<thead>
<tr>
<th>å‰ç«¯åŠŸèƒ½</th>
<th>æ”¯æŒæƒ…å†µ</th>
</tr>
</thead>
<tbody><tr>
<td>æ˜¾ç¤ºæ€»é¡µ</td>
<td>ğŸ™‚</td>
</tr>
<tr>
<td>ä»»æ„é¡µç è·³è½¬</td>
<td>ğŸ™‚</td>
</tr>
<tr>
<td>è·³è½¬é™„è¿‘æ•°é¡µ</td>
<td>ğŸ™‚</td>
</tr>
<tr>
<td>å¤§é‡æ•°æ®é›†</td>
<td>ğŸ˜­å®Œå…¨ä¸å¯ç”¨</td>
</tr>
<tr>
<td>å®ç°éš¾åº¦</td>
<td>ç®€å•</td>
</tr>
</tbody></table>
<h1><span id="limit-offset-fang-an">limit offsetæ–¹æ¡ˆ</span><a href="#limit-offset-fang-an" class="header-anchor">#</a></h1><pre class="mermaid">sequenceDiagram
    participant å‰ç«¯
    participant åç«¯
    å‰ç«¯ ->> åç«¯: è¯·æ±‚æ»¡è¶³æ¡ä»¶çš„èµ„æºæ€»æ•°
    åç«¯ -->> å‰ç«¯: è¿”å›æ»¡è¶³æ¡ä»¶çš„èµ„æºæ€»æ•°
    å‰ç«¯ ->> åç«¯: è¯·æ±‚èµ„æºé›†æ•°æ®ã€PageNo
    åç«¯ -->> å‰ç«¯: éƒ¨åˆ†æ•°æ®</pre>

<table>
<thead>
<tr>
<th>å‰ç«¯åŠŸèƒ½</th>
<th>æ”¯æŒæƒ…å†µ</th>
</tr>
</thead>
<tbody><tr>
<td>æ˜¾ç¤ºæ€»é¡µ</td>
<td>ğŸ™‚</td>
</tr>
<tr>
<td>ä»»æ„é¡µç è·³è½¬</td>
<td>ğŸ™‚</td>
</tr>
<tr>
<td>è·³è½¬é™„è¿‘æ•°é¡µ</td>
<td>ğŸ™‚</td>
</tr>
<tr>
<td>å¤§é‡æ•°æ®é›†</td>
<td>ğŸ˜­æµ·é‡æ•°æ®é›†ä¸‹æ€§èƒ½å·®</td>
</tr>
<tr>
<td>å®ç°éš¾åº¦</td>
<td>ç›¸å¯¹ç®€å•</td>
</tr>
</tbody></table>
<h1><span id="cursor-fang-an">cursoræ–¹æ¡ˆ</span><a href="#cursor-fang-an" class="header-anchor">#</a></h1><pre class="mermaid">sequenceDiagram
    participant å‰ç«¯
    participant åç«¯
    å‰ç«¯ ->> åç«¯: è¯·æ±‚æ»¡è¶³æ¡ä»¶çš„èµ„æºæ€»æ•°
    åç«¯ -->> å‰ç«¯: è¿”å›æ»¡è¶³æ¡ä»¶çš„èµ„æºæ€»æ•°
    å‰ç«¯ ->> åç«¯: è¯·æ±‚èµ„æºé›†æ•°æ®ã€cursorã€limit
    åç«¯ -->> å‰ç«¯: éƒ¨åˆ†æ•°æ®ã€prevCursorã€nextCursor</pre>

<table>
<thead>
<tr>
<th>å‰ç«¯åŠŸèƒ½</th>
<th>æ”¯æŒæƒ…å†µ</th>
</tr>
</thead>
<tbody><tr>
<td>æ˜¾ç¤ºæ€»é¡µ</td>
<td>ğŸ™‚</td>
</tr>
<tr>
<td>ä»»æ„é¡µç è·³è½¬</td>
<td>ğŸ˜­</td>
</tr>
<tr>
<td>è·³è½¬é™„è¿‘æ•°é¡µ</td>
<td>ğŸ™‚</td>
</tr>
<tr>
<td>å¤§é‡æ•°æ®é›†</td>
<td>ğŸ™‚</td>
</tr>
<tr>
<td>å®ç°éš¾åº¦</td>
<td>ç›¸å¯¹å¤æ‚</td>
</tr>
</tbody></table>
<p>å¦‚æœæ¯ä¸€æ¬¡ç¿»é¡µéƒ½è¿”å›æ€»é¡µæ•°çš„è¯ï¼Œå¯¹æ€§èƒ½æ¥è®²ä¹Ÿæ˜¯ä¸å°çš„å¼€é”€ã€‚</p>
<p>ç›¸å¯¹åŠ¨æ€çš„æ•°æ®æ¥è¯´ï¼Œå¦‚æœä¸ä¸€ç›´ç¿»åˆ°æ²¡æœ‰æ•°æ®ä¸ºæ­¢ï¼Œä¹Ÿä¸å¥½ç¡®å®šæ˜¯å¦åˆ°äº†æœ€åä¸€é¡µã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»¥åŠè·³è½¬é™„è¿‘æ•°é¡µçš„é—®é¢˜ï¼Œå¯ä»¥æ¼”è¿›ä¸ºè¿™æ ·çš„æ–¹æ¡ˆã€‚</p>
<p>å‡å®šå‰ç«¯æœ€å¤šæ˜¾ç¤ºæœ€è¿‘6é¡µï¼Œæ¯é¡µ50æ¡æ•°æ®ï¼Œé‚£ä¹ˆå‰ç«¯å¯ä»¥ç›´æ¥å°è¯•é¢„è¯»300æ¡æ•°æ®ï¼Œæ ¹æ®è¿”å›çš„æ•°æ®æ¥åšå±€éƒ¨çš„åˆ†é¡µã€‚ä¸€è¨€ä»¥è”½ä¹‹ï¼šè¯»å–æ›´å¤šçš„æ•°æ®æ¥è¿›è¡Œå±€éƒ¨åˆ†é¡µã€‚</p>
<p><img src="/pagination-practice/cursor_preload.png" alt="cursor_preload"></p>
<p>è¿™é‡Œå¯ä»¥å†ç®€åŒ–ä¸€ä¸‹å‰ç«¯çš„å®ç°ï¼Œæ·»åŠ offsetå‚æ•°ï¼Œè¿™æ ·å­å‰ç«¯åªéœ€è¦åˆ¤æ–­å½“å‰é¡µå‰åæ•°æ®æ¡æ•°æ˜¯å¦è¶³å¤Ÿï¼Œé™„è¿‘é¡µçš„è·³è½¬å¯ä»¥é€šè¿‡æºå¸¦offsetå­—æ®µè¯·æ±‚å¾—åˆ°ã€‚</p>
<h1><span id="cursor-fang-an-yu-offset-jie-he">cursoræ–¹æ¡ˆä¸offsetç»“åˆ</span><a href="#cursor-fang-an-yu-offset-jie-he" class="header-anchor">#</a></h1><p><img src="/pagination-practice/cursor_offset.png" alt="cursor_offset"></p>
<script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';	mermaid.initialize({startOnLoad: true, flowchart: {curve: 'linear'}}); </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/code/java/spring-database-audit-time/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/code/java/spring-database-audit-time/" class="post-title-link" itemprop="url">Springè®°å½•æ•°æ®åº“æ“ä½œæ—¶é—´çš„å‡ ç§æ–¹å¼</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-12-15 23:22:17" itemprop="dateCreated datePublished" datetime="2023-12-15T23:22:17+00:00">2023-12-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-12-25 00:59:54" itemprop="dateModified" datetime="2023-12-25T00:59:54+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>Springè®°å½•æ•°æ®åº“æ“ä½œæ—¶é—´çš„å‡ ç§æ–¹å¼</p>
<h1><span id="spring-jpa">Spring Jpa</span><a href="#spring-jpa" class="header-anchor">#</a></h1><p>@EnableJpaAuditingæ³¨è§£å¼€å¯Jpaçš„å®¡è®¡åŠŸèƒ½ï¼Œç„¶ååœ¨å®ä½“ç±»ä¸Šä½¿ç”¨@CreatedDateå’Œ@LastModifiedDateæ³¨è§£å³å¯</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Column(name = &quot;create_time&quot;)</span></span><br><span class="line"><span class="meta">@CreatedDate</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime createTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Column(name = &quot;update_time&quot;)</span></span><br><span class="line"><span class="meta">@LastModifiedDate</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime updateTime;</span><br></pre></td></tr></table></figure>

<h1><span id="spring-r2dbc">Spring R2dbc</span><a href="#spring-r2dbc" class="header-anchor">#</a></h1><p>Spring R2dbcå¯ä»¥ä½¿ç”¨@CreatedDateå’Œ@LastModifiedDateæ³¨è§£æ¥å®ç°ã€‚ä½†æ˜¯éœ€è¦åœ¨Applicationä¸Šå¼€å¯<code>@EnableR2dbcAuditing</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Column(&quot;created_time&quot;)</span></span><br><span class="line"><span class="meta">@CreatedDate</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime createdTime;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Column(&quot;updated_time&quot;)</span></span><br><span class="line"><span class="meta">@LastModifiedDate</span></span><br><span class="line"><span class="keyword">private</span> LocalDateTime updatedTime;</span><br></pre></td></tr></table></figure>

<h1><span id="ying-yong-cheng-xu-xiu-gai">åº”ç”¨ç¨‹åºä¿®æ”¹</span><a href="#ying-yong-cheng-xu-xiu-gai" class="header-anchor">#</a></h1><p>åº”ç”¨ç¨‹åºä¿®æ”¹å°±æ¯”è¾ƒç®€å•ï¼Œç®€å•è®¾ç½®ä¸€ä¸‹å³å¯,ä»¥PersonPoç±»ä¸ºä¾‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PersonPo</span> <span class="variable">personPo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PersonPo</span>();</span><br><span class="line">personPo.setCreateTime(LocalDateTime.now());</span><br><span class="line">personPo.setUpdateTime(LocalDateTime.now());</span><br></pre></td></tr></table></figure>

<h1><span id="mysql-chang-jing-xia-li-yong-timestamp-neng-li">Mysqlåœºæ™¯ä¸‹åˆ©ç”¨TIMESTAMPèƒ½åŠ›</span><a href="#mysql-chang-jing-xia-li-yong-timestamp-neng-li" class="header-anchor">#</a></h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> person (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    <span class="operator">/</span><span class="operator">/</span> ... å…¶ä»–å­—æ®µ ...</span><br><span class="line">    create_time <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">    update_time <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/code/async-network-code/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/code/async-network-code/" class="post-title-link" itemprop="url">å¼‚æ­¥ç½‘ç»œè¯·æ±‚ç¼–ç </a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-12-10 08:32:54" itemprop="dateCreated datePublished" datetime="2023-12-10T08:32:54+00:00">2023-12-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-12-25 00:59:54" itemprop="dateModified" datetime="2023-12-25T00:59:54+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>æœ¬æ–‡ä»‹ç»å¸¸è§çš„å¼‚æ­¥ç½‘ç»œè¯·æ±‚ç¼–ç æ‰‹æ³•ã€‚å°½ç®¡åƒgolangè¿™äº›çš„è¯­è¨€ï¼Œæ”¯æŒåç¨‹ï¼Œå¯ä»¥ä½¿å¾—Programmerä»¥åŒæ­¥çš„æ–¹å¼ç¼–å†™ä»£ç ï¼Œå¤§å¤§é™ä½ç¼–ç è€…çš„å¿ƒæ™ºè´Ÿæ‹…ã€‚ä½†ç½‘ç»œç¼–ç¨‹ä¸­ï¼Œæ‰¹é‡åˆéå¸¸å¸¸è§ï¼Œè¿™å°±å¯¼è‡´å³ä½¿åœ¨Golangä¸­ï¼Œä¹Ÿä¸å¾—ä¸è¿›è¡Œåç¨‹çš„åˆ‡æ¢æ¥æ»¡è¶³æ‰¹é‡çš„è¯‰æ±‚ï¼Œåœ¨Golangä¸­å¾€å¾€å¯¹å¤–ä»¥callbackçš„æ–¹å¼æš´éœ²æ¥å£ã€‚</p>
<p>æ— è®ºæ˜¯callbackã€è¿˜æ˜¯è¿”å›futureã€è¿˜æ˜¯è¿”å›Mono&#x2F;Fluxï¼Œäº¦æˆ–æ˜¯ä»channelä¸­è¯»å–ï¼Œè¿™æ˜¯ä¸åŒçš„å¼‚æ­¥ç¼–ç¨‹èŒƒå¼ï¼Œç¼–ç çš„æ—¶å€™ï¼Œå¯ä»¥ä»é¡¹ç›®æ•´ä½“ã€å›¢é˜Ÿç¼–ç é£æ ¼ã€ä¸ªäººå–œå¥½æ¥ä¾æ¬¡è€ƒè™‘ã€‚æœ¬æ–‡å°†ä»¥callbackä¸ºä¸»ï¼Œä½†ç§»æ¤åˆ°å…¶ä»–å¼‚æ­¥ç¼–ç èŒƒå¼ï¼Œå¹¶ä¸å›°éš¾ã€‚</p>
<p>ä½¿ç”¨callbackæ¨¡å¼åï¼Œå¯¹å¤–çš„æ–¹æ³•ç­¾åç±»ä¼¼:</p>
<p>go</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(c *Client)</span></span> Get(ctx context.Context, req *Request, callback <span class="function"><span class="keyword">func</span><span class="params">(resp *Response, err <span class="type">error</span>)</span></span>) <span class="type">error</span></span><br></pre></td></tr></table></figure>

<p>java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Client</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">get</span><span class="params">(Request req, Callback callback)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2><span id="wang-luo-bian-cheng-zhong-de-pi-liang">ç½‘ç»œç¼–ç¨‹ä¸­çš„æ‰¹é‡</span><a href="#wang-luo-bian-cheng-zhong-de-pi-liang" class="header-anchor">#</a></h2><p>å¯¹äºç½‘ç»œè¯·æ±‚æ¥è¯´ï¼Œæ‰¹é‡å¯ä»¥æé«˜æ€§èƒ½ã€‚ æ‰¹é‡å¤„ç†æ˜¯æŒ‡å°†å¤šä¸ªè¯·æ±‚æˆ–ä»»åŠ¡ç»„åˆåœ¨ä¸€èµ·ï¼Œä½œä¸ºå•ä¸€çš„å·¥ä½œå•å…ƒè¿›è¡Œå¤„ç†ã€‚æ‰¹é‡å°½é‡å¯¹ç”¨æˆ·é€æ˜ï¼Œç”¨æˆ·åªéœ€è¦ç®€å•åœ°å¯¹æ‰¹é‡è¿›è¡Œé…ç½®ï¼Œè€Œä¸éœ€è¦å…³å¿ƒæ‰¹é‡çš„å®ç°ç»†èŠ‚ã€‚</p>
<p>å¸¸è§çš„æ‰¹é‡ç›¸å…³é…ç½®</p>
<ul>
<li>batch interval: æ‰¹é‡çš„æ—¶é—´é—´éš”ï¼Œæ¯”å¦‚æ¯éš”1sï¼Œæ‰¹é‡ä¸€æ¬¡</li>
<li>batch size: æ‰¹é‡çš„æœ€å¤§å¤§å°ï¼Œæ¯”å¦‚æ¯æ¬¡æœ€å¤šæ‰¹é‡100ä¸ªè¯·æ±‚</li>
</ul>
<p>æ‰¹é‡å¯ä»¥é€šè¿‡å®šæ—¶ä»»åŠ¡å®ç°ï¼Œä¹Ÿå¯ä»¥åšä¸€äº›ä¼˜åŒ–ï¼Œæ¯”å¦‚é˜Ÿåˆ—ä¸­æ— è¯·æ±‚æ—¶ï¼Œæš‚åœå®šæ—¶ä»»åŠ¡ï¼Œæœ‰è¯·æ±‚æ—¶ï¼Œå¯åŠ¨å®šæ—¶ä»»åŠ¡ã€‚</p>
<h2><span id="bian-ma-xi-jie">ç¼–ç ç»†èŠ‚</span><a href="#bian-ma-xi-jie" class="header-anchor">#</a></h2><p>æ•´ä½“æµç¨‹å¤§æ¦‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/code/async-network-code/async-network-code.png" alt="async-network-code"></p>
<h3><span id="yi-ding-yao-xian-ba-qing-qiu-fang-dao-dui-lie-x2f-map-zhong">ä¸€å®šè¦å…ˆæŠŠè¯·æ±‚æ”¾åˆ°é˜Ÿåˆ—&#x2F;mapä¸­</span><a href="#yi-ding-yao-xian-ba-qing-qiu-fang-dao-dui-lie-x2f-map-zhong" class="header-anchor">#</a></h3><p>é¿å…ç½‘ç»œè¯·æ±‚å“åº”è¿‡å¿«ï¼Œå¯¼è‡´callbackè¿˜æ²¡æ³¨å†Œä¸Šï¼Œå°±å·²ç»æ”¶åˆ°å“åº”äº†ã€‚</p>
<h3><span id="dui-lie-zhong-de-xiao-xi-yi-ding-yao-you-chao-shi-ji-zhi">é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯ä¸€å®šè¦æœ‰è¶…æ—¶æœºåˆ¶</span><a href="#dui-lie-zhong-de-xiao-xi-yi-ding-yao-you-chao-shi-ji-zhi" class="header-anchor">#</a></h3><p>é¿å…ç”±äºä¸¢åŒ…ç­‰åŸå› ï¼Œå¯¼è‡´è¯·æ±‚ä¸€ç›´æ²¡æœ‰å“åº”ï¼Œè€Œå¯¼è‡´é˜Ÿåˆ—ä¸­çš„è¯·æ±‚è¶Šæ¥è¶Šå¤šï¼Œæœ€ç»ˆå†…å­˜æº¢å‡ºã€‚</p>
<h3><span id="wait-dui-lie-sheng-ming-zhou-qi-yu-di-ceng-wang-luo-client-sheng-ming-zhou-qi-yi-zhi">waité˜Ÿåˆ—ç”Ÿå‘½å‘¨æœŸä¸åº•å±‚ç½‘ç»œclientç”Ÿå‘½å‘¨æœŸä¸€è‡´</span><a href="#wait-dui-lie-sheng-ming-zhou-qi-yu-di-ceng-wang-luo-client-sheng-ming-zhou-qi-yi-zhi" class="header-anchor">#</a></h3><p>waité˜Ÿåˆ—ä¸­è¯·æ±‚ä¸€å®šæ˜¯ä¾é™„äºclientçš„ï¼Œä¸€æ—¦clienté‡å»ºï¼Œé˜Ÿåˆ—ä¹Ÿéœ€è¦é‡å»ºï¼Œå¹¶è§¦å‘callbackã€futureçš„å¤±è´¥å›è°ƒã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/ignite/ignite-huaweicloud-usage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/ignite/ignite-huaweicloud-usage/" class="post-title-link" itemprop="url">Apache Igniteåœ¨åä¸ºäº‘IoTæœåŠ¡äº§å“éƒ¨çš„ä½¿ç”¨</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-12-07 14:01:05" itemprop="dateCreated datePublished" datetime="2023-12-07T14:01:05+00:00">2023-12-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-12-25 00:59:54" itemprop="dateModified" datetime="2023-12-25T00:59:54+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1><span id="apache-ignite-jian-jie">Apache Igniteç®€ä»‹</span><a href="#apache-ignite-jian-jie" class="header-anchor">#</a></h1><p>Apache Igniteæ˜¯ä¸€ä¸ªå¼€æºåˆ†å¸ƒå¼çš„æ•°æ®åº“ã€ç¼“å­˜å’Œè®¡ç®—å¹³å°ã€‚å®ƒçš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå†…å­˜æ•°æ®ç½‘æ ¼ï¼Œå®ƒå¯ä»¥å°†å†…å­˜ä½œä¸ºåˆ†å¸ƒå¼çš„æŒä¹…åŒ–å­˜å‚¨ï¼Œä»¥æä¾›é«˜æ€§èƒ½å’Œå¯æ‰©å±•æ€§ã€‚å®ƒè¿˜æä¾›äº†ä¸€ä¸ªåˆ†å¸ƒå¼çš„é”®å€¼å­˜å‚¨ã€SQLæ•°æ®åº“ã€æµå¼æ•°æ®å¤„ç†å’Œå¤æ‚çš„äº‹ä»¶å¤„ç†ç­‰åŠŸèƒ½ã€‚</p>
<p>Igniteçš„æ ¸å¿ƒç«äº‰åŠ›åŒ…æ‹¬ï¼š</p>
<ul>
<li>å…¼å®¹Mysqlã€Oracleè¯­æ³•</li>
<li>æ€§èƒ½å¼ºå¤§ï¼Œå¯ä»¥æ°´å¹³æ‰©å±•</li>
<li>ç¼“å­˜ä¸æ•°æ®åº“åŒæºï¼Œå¯é€šè¿‡KVã€SQLã€JDBCã€ODBCç­‰æ–¹å¼è®¿é—®</li>
</ul>
<p>åŒæ—¶ï¼Œä¸ºäº†ä¾¿äºå¼€å‘ï¼Œé™¤äº†jdbcã€odbcã€restfulæ–¹å¼å¤–ï¼ŒIgniteè¿˜å®˜æ–¹æä¾›äº†Javaã€C++ã€.Netã€Pythonã€Node.jsã€PHPç­‰è¯­è¨€çš„å®¢æˆ·ç«¯ï¼Œå¯ä»¥æ–¹ä¾¿çš„ä¸Igniteè¿›è¡Œäº¤äº’ã€‚</p>
<p><img src="/ignite/ignite-huaweicloud-usage/ignite-storage-access.png" alt="ignite-storage-access"></p>
<h1><span id="apache-ignite-de-wen-ti">Apache Igniteçš„é—®é¢˜</span><a href="#apache-ignite-de-wen-ti" class="header-anchor">#</a></h1><h2><span id="pin-fan-chuang-jian-shan-chu-biao-dao-zhi-ignite-discovery-history-size-chao-guo-xian-zhi">é¢‘ç¹åˆ›å»ºåˆ é™¤è¡¨ï¼Œå¯¼è‡´IGNITE_DISCOVERY_HISTORY_SIZEè¶…è¿‡é™åˆ¶</span><a href="#pin-fan-chuang-jian-shan-chu-biao-dao-zhi-ignite-discovery-history-size-chao-guo-xian-zhi" class="header-anchor">#</a></h2><p>æ ¹æ®Ignite2çš„æ‹“æ‰‘æ¨¡å‹ï¼Œé›†ç¾¤çš„æ‹“æ‰‘ç‰ˆæœ¬ä¼šåœ¨åˆ›å»ºè¡¨&#x2F;åˆ é™¤è¡¨çš„æ—¶å€™å‘ç”Ÿå˜åŒ–ï¼Œè¯¥å˜åŒ–ç‰ˆæœ¬å·é€’å¢ï¼Œä¸”ä»…ä¼šä¿ç•™æœ€è¿‘$IgniteDiscoveryHistorySizeæ¡è®°å½•ï¼Œç¨‹åºæŸå¤„ä¼šå†™æ­»è¯»å–ç‰ˆæœ¬ä¸º0çš„æ•°æ®ï¼Œè¯»å–ä¸åˆ°æ—¶ï¼Œigniteé›†ç¾¤ä¼šé‡å¯ã€‚é»˜è®¤å€¼ä¸º500ã€‚<br>ç¤¾åŒºissue: <a target="_blank" rel="noopener" href="https://github.com/apache/ignite/issues/10894">https://github.com/apache/ignite/issues/10894</a><br>ç¬”è€…æš‚æ—¶æ²¡æœ‰æ—¶é—´æ¥ä¿®å¤è¿™ä¸ªissueï¼Œå¯ä»¥é€šè¿‡å°†IGNITE_DISCOVERY_HISTORY_SIZEè®¾ç½®åœ°æ¯”è¾ƒå¤§ï¼Œæ¥è§„é¿è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2><span id="ignite2-ke-hu-duan-yi-yong-xing-wen-ti">Ignite2å®¢æˆ·ç«¯æ˜“ç”¨æ€§é—®é¢˜</span><a href="#ignite2-ke-hu-duan-yi-yong-xing-wen-ti" class="header-anchor">#</a></h2><h3><span id="ignite2-ke-hu-duan-chao-shi-mo-ren-zhi-bu-he-li">Ignite2å®¢æˆ·ç«¯è¶…æ—¶é»˜è®¤å€¼ä¸åˆç†</span><a href="#ignite2-ke-hu-duan-chao-shi-mo-ren-zhi-bu-he-li" class="header-anchor">#</a></h3><p>Ignite2å®¢æˆ·ç«¯çš„è¿æ¥è¶…æ—¶ã€æ‰§è¡Œsqlè¶…æ—¶é»˜è®¤éƒ½æ˜¯0ï¼Œæ²¡æœ‰ç²¾å¿ƒç ”ç©¶è¿‡é…ç½®çš„ç”¨æˆ·åœ¨å¼‚å¸¸åœºæ™¯ä¸‹ï¼Œåº”ç”¨ç¨‹åºå¯èƒ½ä¼šhangä½ã€‚ä»æ˜“ç”¨æ€§çš„è§’åº¦æ¥è¯´ï¼Œç½‘ç»œé€šä¿¡çš„ä»»ä½•æ“ä½œï¼Œé»˜è®¤éƒ½åº”è¯¥æœ‰è¶…æ—¶æ—¶é—´ã€‚</p>
<h3><span id="ignite2-ke-hu-duan-bu-zhi-chi-yong-yuan-de-chong-shi">Ignite2å®¢æˆ·ç«¯ä¸æ”¯æŒæ°¸è¿œçš„é‡è¯•</span><a href="#ignite2-ke-hu-duan-bu-zhi-chi-yong-yuan-de-chong-shi" class="header-anchor">#</a></h3><p>Igniteé€šè¿‡é¢„å…ˆè®¡ç®—å‡ºæ‰€æœ‰éœ€è¦é‡è¿çš„æ—¶é—´ç‚¹æ¥å®ç°é‡è¿ï¼Œå¦‚æœæƒ³é…ç½®æˆæ°¸è¿œçš„é‡è¿ï¼Œä¼šå› ä¸ºæ—¶é—´ç‚¹çš„è®¡ç®—å¯¼è‡´å†…å­˜æº¢å‡ºã€‚ä»æ˜“ç”¨æ€§çš„è§’åº¦æ¥è¯´ï¼Œåº”è¯¥æ”¯æŒæ°¸è¿œçš„é‡è¿ã€‚</p>
<h2><span id="ignite2-ke-hu-duan-zai-mou-xie-yi-chang-xia-wu-fa-zi-yu">Ignite2å®¢æˆ·ç«¯åœ¨æŸäº›å¼‚å¸¸ä¸‹æ— æ³•è‡ªæ„ˆ</span><a href="#ignite2-ke-hu-duan-zai-mou-xie-yi-chang-xia-wu-fa-zi-yu" class="header-anchor">#</a></h2><p>å½“clientæ‰§è¡Œsqlçš„æ—¶å€™ï¼Œç¢°åˆ°å¦‚ä¸‹å¼‚å¸¸çš„æ—¶å€™ï¼Œæ— æ³•è‡ªæ„ˆã€‚å¯ä»¥é€šè¿‡æ‰§è¡ŒSQLå¯¹clientè¿›è¡Œå®šæœŸæ£€æŸ¥å¹¶é‡å»ºã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Caused by: org.apache.ignite.internal.client.thin.ClientServerError: Ignite failed to process request [47]: 50000: Can not perform the operation because the cluster is inactive. Note, that the cluster is considered inactive by default if Ignite Persistent Store is used to let all the nodes join the cluster. To activate the cluster call Ignite.cluster.state(ClusterState.ACTIVE)</span><br></pre></td></tr></table></figure>

<h2><span id="ignite2-socketchannel-xie-lu-wen-ti">Ignite2 SocketChannelæ³„éœ²é—®é¢˜</span><a href="#ignite2-socketchannel-xie-lu-wen-ti" class="header-anchor">#</a></h2><p>Igniteå®¢æˆ·ç«¯åœ¨è¿æ¥æ—¶ï¼Œå¦‚æœå¯¹åº”çš„Serverç«¯æ²¡æœ‰å¯åŠ¨ï¼Œä¼šå¯¼è‡´SocketChannelæ³„éœ²ï¼Œå·²ç”±ç¬”è€…æäº¤ä»£ç ä¿®å¤ï¼š<a target="_blank" rel="noopener" href="https://github.com/apache/ignite/pull/11016/files">https://github.com/apache/ignite/pull/11016/files</a></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/code/github-actions-reference/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/code/github-actions-reference/" class="post-title-link" itemprop="url">GitHub Actions å‚è€ƒå¤§å…¨</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-11-24 21:29:21" itemprop="dateCreated datePublished" datetime="2023-11-24T21:29:21+00:00">2023-11-24</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-12-25 00:59:54" itemprop="dateModified" datetime="2023-12-25T00:59:54+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <div class="toc">

<!-- toc -->

<ul>
<li><a href="#tong-yong-github-actions">é€šç”¨ GitHub Actions</a><ul>
<li><a href="#commit-lint">commit lint</a></li>
<li><a href="#line-lint">line lint</a></li>
</ul>
</li>
<li><a href="#go">Go</a><ul>
<li><a href="#golangci-lint">golangci-lint</a></li>
<li><a href="#go-mod-check">go mod check</a></li>
<li><a href="#go-unit-tests">go unit tests</a></li>
</ul>
</li>
<li><a href="#java-github-actions">Java GitHub Actions</a><ul>
<li><a href="#maven-checkstyle">maven checkstyle</a></li>
<li><a href="#maven-spotbugs">maven spotbugs</a></li>
<li><a href="#maven-unit-tests">maven unit tests</a></li>
</ul>
</li>
<li><a href="#typescript-github-actions">TypeScript GitHub Actions</a><ul>
<li><a href="#npm-build-test">npm build test</a></li>
<li><a href="#prettier">prettier</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

</div>

<h1><span id="tong-yong-github-actions">é€šç”¨ GitHub Actions</span><a href="#tong-yong-github-actions" class="header-anchor">#</a></h1><h2><span id="commit-lint">commit lint</span><a href="#commit-lint" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">commit</span> <span class="string">lint</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">commitlint:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">wagoid/commitlint-github-action@v5</span></span><br></pre></td></tr></table></figure>

<h2><span id="line-lint">line lint</span><a href="#line-lint" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">line</span> <span class="string">lint</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">line</span> <span class="string">lint</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">linelint</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">fernandrone/linelint@master</span></span><br></pre></td></tr></table></figure>

<h1><span id="go">Go</span><a href="#go" class="header-anchor">#</a></h1><h2><span id="golangci-lint">golangci-lint</span><a href="#golangci-lint" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">go</span> <span class="string">ci</span> <span class="string">Lint</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">golangci:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">lint</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-go@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">go-version:</span> <span class="string">&#x27;1.21&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">golangci-lint</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">golangci/golangci-lint-action@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">version:</span> <span class="string">latest</span></span><br><span class="line">          <span class="attr">args:</span> <span class="string">--timeout</span> <span class="string">3m0s</span></span><br></pre></td></tr></table></figure>

<h2><span id="go-mod-check">go mod check</span><a href="#go-mod-check" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">go</span> <span class="string">mod</span> <span class="string">check</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">go_mod_check:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Run</span> <span class="string">Go</span> <span class="string">Mod</span> <span class="string">Check</span> <span class="string">Action</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">shoothzj/go-mod-check-action@main</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">prohibitIndirectDepUpdate:</span> <span class="string">&#x27;true&#x27;</span></span><br></pre></td></tr></table></figure>

<h2><span id="go-unit-tests">go unit tests</span><a href="#go-unit-tests" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">go</span> <span class="string">unit</span> <span class="string">test</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">go_unit_test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-go@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">go-version:</span> <span class="string">&#x27;1.21&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">setup</span> <span class="string">OpenGemini</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">shoothzj/setup-opengemini-action@main</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Run</span> <span class="string">coverage</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">go</span> <span class="string">test</span> <span class="string">./...</span> <span class="string">-coverpkg=./padmin/...</span> <span class="string">-race</span> <span class="string">-coverprofile=coverage.out</span> <span class="string">-covermode=atomic</span></span><br></pre></td></tr></table></figure>

<h1><span id="java-github-actions">Java GitHub Actions</span><a href="#java-github-actions" class="header-anchor">#</a></h1><h2><span id="maven-checkstyle">maven checkstyle</span><a href="#maven-checkstyle" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">java</span> <span class="string">checkstyle</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">java_checkstyle:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Maven</span> <span class="string">Central</span> <span class="string">Repository</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-java@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">java-version:</span> <span class="string">&#x27;17&#x27;</span></span><br><span class="line">          <span class="attr">distribution:</span> <span class="string">&#x27;temurin&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">checkstyle</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">mvn</span> <span class="string">-B</span> <span class="string">clean</span> <span class="string">checkstyle:check</span></span><br></pre></td></tr></table></figure>

<h2><span id="maven-spotbugs">maven spotbugs</span><a href="#maven-spotbugs" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">java</span> <span class="string">spotbugs</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">java_spotbugs:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Maven</span> <span class="string">Central</span> <span class="string">Repository</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-java@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">java-version:</span> <span class="string">&#x27;17&#x27;</span></span><br><span class="line">          <span class="attr">distribution:</span> <span class="string">&#x27;temurin&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">spotbugs</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">mvn</span> <span class="string">-B</span> <span class="string">-DskipTests</span> <span class="string">clean</span> <span class="string">verify</span> <span class="string">spotbugs:spotbugs</span></span><br></pre></td></tr></table></figure>

<h2><span id="maven-unit-tests">maven unit tests</span><a href="#maven-unit-tests" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">java</span> <span class="string">unit</span> <span class="string">tests</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">java_unit_tests:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Maven</span> <span class="string">Central</span> <span class="string">Repository</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-java@v3</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">java-version:</span> <span class="string">&#x27;17&#x27;</span></span><br><span class="line">          <span class="attr">distribution:</span> <span class="string">&#x27;temurin&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">unit</span> <span class="string">tests</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">mvn</span> <span class="string">-B</span> <span class="string">clean</span> <span class="string">test</span></span><br></pre></td></tr></table></figure>

<h1><span id="typescript-github-actions">TypeScript GitHub Actions</span><a href="#typescript-github-actions" class="header-anchor">#</a></h1><h2><span id="npm-build-test">npm build test</span><a href="#npm-build-test" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">npm</span> <span class="string">build</span> <span class="string">test</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">npm_buid_test:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">latest</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">build</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">setup</span> <span class="string">pulsar</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">shoothzj/setup-pulsar-action@main</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">run</span> <span class="string">test</span></span><br></pre></td></tr></table></figure>

<h2><span id="prettier">prettier</span><a href="#prettier" class="header-anchor">#</a></h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">prettier</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line">  <span class="attr">pull_request:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">main</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">prettier:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/setup-node@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">latest</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">--save-dev</span> <span class="string">prettier</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">--global</span> <span class="string">prettier</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">run:</span> <span class="string">prettier</span> <span class="string">--check</span> <span class="string">&#x27;**/*.ts&#x27;</span></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/code/file-codec-design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/code/file-codec-design/" class="post-title-link" itemprop="url">æ–‡ä»¶ç¼–è§£ç ä»£ç è®¾è®¡</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-11-20 15:30:54" itemprop="dateCreated datePublished" datetime="2023-11-20T15:30:54+00:00">2023-11-20</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-12-25 00:59:54" itemprop="dateModified" datetime="2023-12-25T00:59:54+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <div class="toc">

<!-- toc -->

<ul>
<li><a href="#gai-shu">æ¦‚è¿°</a></li>
<li><a href="#java">Java</a></li>
</ul>
<!-- tocstop -->

</div>

<h1><span id="gai-shu">æ¦‚è¿°</span><a href="#gai-shu" class="header-anchor">#</a></h1><p>æˆ‘ä»¬ä»¥xyzæ–‡ä»¶æ ¼å¼ä¸ºä¾‹ï¼Œæ¥è¯´æ˜æ–‡ä»¶ç¼–è§£ç çš„ä»£ç è®¾è®¡ã€‚xyzæ–‡ä»¶æ ¼å¼å†…å®¹å¦‚ä¸‹ï¼š</p>
<ul>
<li>headeréƒ¨åˆ†ï¼šæ–‡ä»¶å¤´ï¼ŒåŒ…å«æ–‡ä»¶ç‰ˆæœ¬å·ã€æ–‡ä»¶ç±»å‹ã€æ–‡ä»¶å¤§å°ç­‰ä¿¡æ¯</li>
<li>bodyéƒ¨åˆ†ï¼šæ–‡ä»¶ä¸»ä½“</li>
</ul>
<p>é€šç”¨è®¾è®¡å¤§æ¦‚å¦‚ä¸‹</p>
<pre class="mermaid">classDiagram
    class XyzHeader {
        + byte[] content
    }
    class XyzBody {
        + byte[] content
    }
    class Xyz{
        + XyzHeader header
        + XyzBody body
    }
    class XyzReader {
        + Xyz read(fileName: string)
        + void process(String fileName, XyzProcessor processor)
        - XyzHeader readHeader()
        - XyzBody readBody()
    }
    class XyzProcessor {
        <<interface>>
        + void processHeader(XyzHeader header)
        + void processBody(XyzBody body)
    }
    class XyzReadCollectProcessor {
        Xyz getXyz()
    }
    Xyz --> XyzHeader: contains
    Xyz --> XyzBody: contains
    XyzReader --> Xyz: reads
    XyzReader --> XyzProcessor: processes
    XyzReadCollectProcessor --|> XyzProcessor: implements</interface></pre>

<h1><span id="java">Java</span><a href="#java" class="header-anchor">#</a></h1><p>ä½¿ç”¨<code>java.io.RandomAccessFile</code>å’Œ<code>java.nio.channels.FileChannel</code>æ¥å®ç°æ–‡ä»¶è¯»å–ï¼Œä½¿ç”¨<code>io.netty.buffer.ByteBuf</code>æ¥è¯»å†™æ–‡ä»¶ã€‚</p>
<p>æ ¸å¿ƒä»£ç ä¸¾ä¾‹:</p>
<p>XyzReader:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XyzHeader</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] content;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XyzBody</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">byte</span>[] content;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Xyz</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> XyzHeader header;</span><br><span class="line">    <span class="keyword">private</span> XyzBody body;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">XyzProcessor</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">processHeader</span><span class="params">(XyzHeader header)</span>;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">processBody</span><span class="params">(XyzBody body)</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XyzReadCollectProcessor</span> <span class="keyword">implements</span> <span class="title class_">XyzProcessor</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Xyz</span> <span class="variable">xyz</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Xyz</span>();</span><br><span class="line">    <span class="keyword">public</span> Xyz <span class="title function_">getXyz</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> xyz;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">XyzReader</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Xyz <span class="title function_">read</span><span class="params">(String fileName)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> XyzHeader <span class="title function_">readHeader</span><span class="params">(FileChannel fileChannel)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> XyzBody <span class="title function_">readBody</span><span class="params">(FileChannel fileChannel)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';	mermaid.initialize({startOnLoad: true, flowchart: {curve: 'linear'}}); </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/code/multi-lang-http-client-config/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/code/multi-lang-http-client-config/" class="post-title-link" itemprop="url">å¤šè¯­è¨€ç¼–ç¨‹ å„å¤§Httpåº“é…ç½®æŒ‡å—</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-11-18 17:24:58" itemprop="dateCreated datePublished" datetime="2023-11-18T17:24:58+00:00">2023-11-18</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-12-25 00:59:54" itemprop="dateModified" datetime="2023-12-25T00:59:54+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <div class="toc">

<!-- toc -->

<ul>
<li><a href="#go">Go</a><ul>
<li><a href="#go-biao-zhun-ku">Goæ ‡å‡†åº“</a><ul>
<li><a href="#timeout">timeout</a></li>
<li><a href="#connection-timeout">connection timeout</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<!-- tocstop -->

</div>

<h1><span id="go">Go</span><a href="#go" class="header-anchor">#</a></h1><h2><span id="go-biao-zhun-ku">Goæ ‡å‡†åº“</span><a href="#go-biao-zhun-ku" class="header-anchor">#</a></h2><h3><span id="timeout">timeout</span><a href="#timeout" class="header-anchor">#</a></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">client := http.Client&#123;</span><br><span class="line">    Timeout: timeout,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3><span id="connection-timeout">connection timeout</span><a href="#connection-timeout" class="header-anchor">#</a></h3><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">client := http.Client&#123;</span><br><span class="line">    Transport: &amp;http.Transport&#123;</span><br><span class="line">        Dial: (&amp;net.Dialer&#123;</span><br><span class="line">            Timeout: timeout,</span><br><span class="line">        &#125;).Dial,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/code/multi-lang-client-sdk-design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/code/multi-lang-client-sdk-design/" class="post-title-link" itemprop="url">å¤šè¯­è¨€SDKè®¾è®¡</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-11-12 21:09:32" itemprop="dateCreated datePublished" datetime="2023-11-12T21:09:32+00:00">2023-11-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-12-25 00:59:54" itemprop="dateModified" datetime="2023-12-25T00:59:54+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <div class="toc">

<!-- toc -->

<ul>
<li><a href="#duo-yu-yan-sdk-she-ji-de-chang-jian-wen-ti">å¤šè¯­è¨€SDKè®¾è®¡çš„å¸¸è§é—®é¢˜</a><ul>
<li><a href="#ri-zhi-da-yin-de-she-ji-ce-lue">æ—¥å¿—æ‰“å°çš„è®¾è®¡ç­–ç•¥</a></li>
<li><a href="#shi-fou-xu-yao-shi-yong-xian-shi-de-start-connect-fang-fa">æ˜¯å¦éœ€è¦ä½¿ç”¨æ˜¾å¼çš„<code>start</code>&#x2F;<code>connect</code>æ–¹æ³•ï¼Ÿ</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

</div>

<h1><span id="duo-yu-yan-sdk-she-ji-de-chang-jian-wen-ti">å¤šè¯­è¨€SDKè®¾è®¡çš„å¸¸è§é—®é¢˜</span><a href="#duo-yu-yan-sdk-she-ji-de-chang-jian-wen-ti" class="header-anchor">#</a></h1><h2><span id="ri-zhi-da-yin-de-she-ji-ce-lue">æ—¥å¿—æ‰“å°çš„è®¾è®¡ç­–ç•¥</span><a href="#ri-zhi-da-yin-de-she-ji-ce-lue" class="header-anchor">#</a></h2><p>åœ¨SDKçš„å…³é”®èŠ‚ç‚¹ï¼Œæ¯”å¦‚åˆå§‹åŒ–å®Œæˆã€è¿æ¥å»ºç«‹æˆ–è€…è¿æ¥æ–­å¼€ï¼Œéƒ½å¯ä»¥æ‰“å°æ—¥å¿—ã€‚å¦‚æœæ˜¯PerRequestçš„æ—¥å¿—ï¼Œä¸€èˆ¬é»˜è®¤ä¸ä¼šæ‰“å°INFOçº§åˆ«çš„æ—¥å¿—ã€‚</p>
<p>SDKåº”è¯¥é¿å…ä»…ä»…æ‰“å°é”™è¯¯æ—¥å¿—ç„¶åå¿½ç•¥å¼‚å¸¸ï¼›ç›¸åï¼Œå®ƒåº”è¯¥æä¾›æœºåˆ¶è®©è°ƒç”¨è€…èƒ½å¤Ÿæ•è·å¹¶å¤„ç†å¼‚å¸¸ä¿¡æ¯ã€‚è¿™ç§åšæ³•æœ‰åŠ©äºä¿æŒé”™è¯¯å¤„ç†çš„é€æ˜æ€§ï¼Œå¹¶å…è®¸è°ƒç”¨è€…æ ¹æ®éœ€è¦é‡‡å–é€‚å½“çš„å“åº”æªæ–½ã€‚æ­£å¦‚<strong>David J. Wheeler</strong>æ‰€è¯´â€Put the control in the hands of those who know how to handle the information, not those who know how to manage the computers, because encapsulated details will eventually leak out.â€æŠŠæ§åˆ¶æƒæ”¾åˆ°é‚£äº›çŸ¥é“å¦‚ä½•å¤„ç†ä¿¡æ¯çš„äººæ‰‹ä¸­ï¼Œè€Œä¸æ˜¯æ”¾åœ¨é‚£äº›çŸ¥é“å¦‚ä½•ç®¡ç†è®¡ç®—æœºçš„äººæ‰‹ä¸­ï¼Œå› ä¸ºå°è£…çš„ç»†èŠ‚æœ€ç»ˆéƒ½ä¼šæš´éœ²ã€‚</p>
<h2><span id="shi-fou-xu-yao-shi-yong-xian-shi-de-start-x2f-connect-fang-fa">æ˜¯å¦éœ€è¦ä½¿ç”¨æ˜¾å¼çš„<code>start</code>&#x2F;<code>connect</code>æ–¹æ³•ï¼Ÿ</span><a href="#shi-fou-xu-yao-shi-yong-xian-shi-de-start-x2f-connect-fang-fa" class="header-anchor">#</a></h2><p>åƒgoè¿™æ ·çš„è¯­è¨€ï¼Œä¸€èˆ¬æ¥è¯´ä¸å¤ªåœ¨æ„ç‰¹å®šçš„æ—¶é—´å†…ï¼ŒæŸä¸ªåç¨‹æ˜¯å¦å¤„äºé˜»å¡ç­‰å¾…è¿æ¥çš„çŠ¶æ€ã€‚è€Œåœ¨javaè¿™æ ·çš„è¯­è¨€ï¼Œç‰¹åˆ«æ˜¯åœ¨é‡‡ç”¨å“åº”å¼ç¼–ç¨‹æ¨¡å‹çš„åœºæ™¯ä¸‹ï¼Œé€šå¸¸éœ€è¦é€šè¿‡å¼‚æ­¥æ“ä½œæ¥ç®¡ç†è¿æ¥çš„å»ºç«‹ã€‚è¿™å¯ä»¥é€šè¿‡æ˜¾å¼çš„start&#x2F;connectæ–¹æ³•æ¥æˆ–è€…æ˜¯å¼‚æ­¥çš„å·¥å‚æ–¹æ³•æ¥å®ç°ã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://shoothzj.github.io/opengemini/opengemini-sdk-design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="shoothzj">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | å¼ ä¿­çš„åšå®¢">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/opengemini/opengemini-sdk-design/" class="post-title-link" itemprop="url">opengemini client sdk è®¾è®¡</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2023-11-12 16:21:53" itemprop="dateCreated datePublished" datetime="2023-11-12T16:21:53+00:00">2023-11-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">æ›´æ–°äº</span>
      <time title="ä¿®æ”¹æ—¶é—´ï¼š2023-12-25 00:59:54" itemprop="dateModified" datetime="2023-12-25T00:59:54+00:00">2023-12-25</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1><span id="bei-jing">èƒŒæ™¯</span><a href="#bei-jing" class="header-anchor">#</a></h1><p>ç”±äºInfluxdb 1.Xçš„å®¢æˆ·ç«¯å·²ç»åŸºæœ¬å¤„äºç»´æŠ¤çŠ¶æ€ï¼ŒåŒæ—¶openGeminiä»åœ¨ä¸æ–­å‘å±•ä¸­ï¼Œä¸ºäº†èƒ½å¤Ÿæ›´å¥½åœ°æ”¯æŒopenGeminiï¼Œå¦‚æ”¯æŒå¯¹æ¥å¤šä¸ªæœåŠ¡ç«¯åœ°å€ã€æ”¯æŒå¯¹æ¥Apache Arrow Flightåè®®ç­‰ï¼Œç¤¾åŒºå†³å®šå¼€å‘å±äºopenGeminiè‡ªå·±çš„å®¢æˆ·ç«¯SDKã€‚</p>
<h1><span id="ke-hu-duan-sdk-gui-hua-gong-neng">å®¢æˆ·ç«¯SDKè§„åˆ’åŠŸèƒ½</span><a href="#ke-hu-duan-sdk-gui-hua-gong-neng" class="header-anchor">#</a></h1><ul>
<li>æ”¯æŒå¯¹æ¥å¤šä¸ªæœåŠ¡ç«¯åœ°å€</li>
<li>æ”¯æŒå¯¹æ¥Apache Arrow Flightåè®®</li>
<li>æ”¯æŒSqlæŸ¥è¯¢ã€ç»“æ„åŒ–æŸ¥è¯¢ã€å†™å…¥ã€æ‰¹é‡å†™å…¥ç­‰ï¼Œè¯¦è§ä¸‹æ–‡UMLå›¾</li>
<li>é»˜è®¤è¶…æ—¶ï¼Œè¿æ¥è¶…æ—¶10ç§’ï¼Œè¯»å†™è¶…æ—¶30ç§’</li>
</ul>
<p>æœ¬æ–‡çš„æ–¹æ³•å‡å®šç¼–ç¨‹è¯­è¨€ä¸æ”¯æŒé‡è½½ï¼Œå¦‚ç¼–ç¨‹è¯­è¨€æ”¯æŒé‡è½½ï¼Œå¯ä»¥å¯¹æ–¹æ³•åè¿›è¡Œä¸€äº›ä¼˜åŒ–è°ƒæ•´ã€‚</p>
<h1><span id="client-constructor-params-design">Client constructor params design</span><a href="#client-constructor-params-design" class="header-anchor">#</a></h1><p>tlsç›¸å…³é…ç½®å¯ä»¥å‚è€ƒ<a href="../../code/multi-lang-paradigm-tls-config-design">TLSé…ç½®å‚æ•°è®¾è®¡</a></p>
<pre class="mermaid">classDiagram
    class OpenGeminiClient {
        + List~Address~ addresses
        + AuthConfig authConfig // nullable, if null, means no auth
        + BatchConfig batchConfig // nullable, if null, means batch is disabled
        + timeout
        + connectTimeout
        + bool gzipEnabled
        + bool tlsEnabled
        + TlsConfig tlsConfig // language specific
        + void close()
    }
    
    class Address {
        + String host
        + int Port // in rust, it is u16
    }
    
    class AuthConfig {
        + AuthType authType // enum None, Password,Token
        + String username
        + String password
        + String token
    }
    
    class BatchConfig {
        + int batchInterval // must be greater than 0
        + int batchSize // must be greater than 0
    }

    OpenGeminiClient "1" *-- "many" Address : contains
    OpenGeminiClient *-- AuthConfig : contains
    OpenGeminiClient *-- BatchConfig : contains</pre>

<h1><span id="database-amp-retentionpolicy-management-design">Database &amp; RetentionPolicy management design</span><a href="#database-amp-retentionpolicy-management-design" class="header-anchor">#</a></h1><pre class="mermaid">classDiagram
    class RpConfig {
        + String Name
        + String Duration
        + String ShardGroupDuration
        + String IndexDuration
    }</pre>

<h1><span id="write-point-design">Write point design</span><a href="#write-point-design" class="header-anchor">#</a></h1><pre class="mermaid">classDiagram
    class OpenGeminiClient {
        + WritePoint(String database, Point point)
        + WriteBatchPoints(String database, BatchPoints batchPoints)
    }
    class BatchPoints {
        + List~Point~ points
        + AddPoint(Point)
    }
    
    class Point {
        + String measurement
        + Precision precision // enum, second, millisecond, microsecond, nanosecond, default is nanosecond
        + Time time // language specific
        + Map~String, String~ tags
        + Map~String, Object~ fields
        + AddTag(string, string) // init container if null
        + AddField(string, int) // init container if null
        + AddField(string, string) // init container if null
        + AddField(string, float) // init container if null
        + AddField(string, bool) // init container if null
        + SetTime(timestamp)
        + SetPrecision(type)
        + SetMeasurement(name)
    }

    BatchPoints "1" *-- "many" Point : contains</pre>

<h1><span id="sql-like-query-design">Sql-like query design</span><a href="#sql-like-query-design" class="header-anchor">#</a></h1><pre class="mermaid">classDiagram
    class Query {
        + String database
        + String retentionPolicy
        + String command
    }</pre>

<pre class="mermaid">classDiagram
    class QueryResult {
        + List~SeriesResult~ results
        + String error
    }
    class SeriesResult {
        + List~Series~ series // Series is an uncountable noun.
        + String error
    }
    class Series {
        + String name
        + Map~String, String~ tags
        + List~String~ columns
        + List~List~ values
    }
    QueryResult "1" *-- "0..*" SeriesResult : contains
    SeriesResult "1" *-- "0..*" Series : contains</pre>

<h1><span id="ping-design">Ping design</span><a href="#ping-design" class="header-anchor">#</a></h1><pre class="mermaid">classDiagram
    class OpenGeminiClient {
        + void ping(int index) // index selects one from multiple servers
    }</pre>

<h1><span id="inner-http-client-design">Inner Http client design</span><a href="#inner-http-client-design" class="header-anchor">#</a></h1><p>ä½¿ç”¨ç±»ä¼¼InnerHttpClientçš„è®¾è®¡ï¼Œå°†é‰´æƒã€è´Ÿè½½å‡è¡¡ã€é‡è¯•ç­‰é€»è¾‘å°è£…åœ¨å†…éƒ¨ï¼Œå¯¹clientæä¾›ç®€å•çš„æ¥å£ã€‚å¢å¼ºæ¨¡å—åŒ–å’Œä»£ç æ¸…æ™°åº¦ã€‚</p>
<pre class="mermaid">classDiagram
    class InnerHttpClient {
        + void executeHttpGetByIdx(int idx,...) // specify server index
        + void executeHttpRequestByIdx(int idx, String method,...) // specify server index
        + void executeHttpGet(String method,...) // load balance
        + void executeHttpRequest(String method,...) // load balance
        - void executeHttpRequestInner(String url, String method,...) // inner method
    }</pre>

<pre class="mermaid">graph TD
    executeHttpGetByIdx --> executeHttpRequestByIdx
    executeHttpRequestByIdx --> executeHttpRequestInner
    executeHttpGet --> executeHttpRequest
    executeHttpRequest --> executeHttpRequestInner</pre>


<script type="module"> import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.esm.min.mjs';	mermaid.initialize({startOnLoad: true, flowchart: {curve: 'linear'}}); </script>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" title="ä¸‹ä¸€é¡µ" aria-label="ä¸‹ä¸€é¡µ" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2023</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">shoothzj</span>
  </div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>







  




<script class="next-config" data-name="giscus" type="application/json">{"enable":true,"repo":"shoothzj/shoothzj.github.io","repo_id":"R_kgDOIuCX3w","category":"Announcements","category_id":"DIC_kwDOIuCX384Ca5FJ","mapping":"title","reactions_enabled":1,"emit_metadata":1,"theme":"light","lang":"en","crossorigin":"anonymous","input_position":"bottom","loading":"lazy"}</script>

<script>
document.addEventListener('page:loaded', () => {
  if (!CONFIG.page.comments) return;

  NexT.utils.loadComments('.giscus-container')
    .then(() => NexT.utils.getScript('https://giscus.app/client.js', {
      attributes: {
        async                   : true,
        crossOrigin             : 'anonymous',
        'data-repo'             : CONFIG.giscus.repo,
        'data-repo-id'          : CONFIG.giscus.repo_id,
        'data-category'         : CONFIG.giscus.category,
        'data-category-id'      : CONFIG.giscus.category_id,
        'data-mapping'          : CONFIG.giscus.mapping,
        'data-reactions-enabled': CONFIG.giscus.reactions_enabled,
        'data-emit-metadata'    : CONFIG.giscus.emit_metadata,
        'data-theme'            : CONFIG.giscus.theme,
        'data-lang'             : CONFIG.giscus.lang,
        'data-input-position'   : CONFIG.giscus.input_position,
        'data-loading'          : CONFIG.giscus.loading
      },
      parentNode: document.querySelector('.giscus-container')
    }));
});
</script>

</body>
</html>
